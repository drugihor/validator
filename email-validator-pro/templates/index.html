<!DOCTYPE html>
<html>
<head>
    <title>EmailValidator Pro ‚Äî Cloud</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
        .container { max-width: 900px; margin: 0 auto; }
        .btn { padding: 10px 15px; margin: 5px; border: none; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-success { background: #28a745; color: white; }
        .progress { margin: 10px 0; }
        #log { height: 250px; overflow-y: scroll; background: #f4f4f4; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px; }
        .stats { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin: 10px 0; }
    </style>
</head>
<body>
<div class="container">
    <h1>üìß EmailValidator Pro ‚Äî Cloud</h1>

    <input type="file" id="emailFile" accept=".txt"><button onclick="uploadEmails()" class="btn btn-primary">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å email:pass</button><br><br>

    <input type="file" id="proxyFile" accept=".txt"><button onclick="uploadProxies()" class="btn btn-primary">üîÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–∫—Å–∏</button>

    <p><label>–ü–æ—Ç–æ–∫–∏: <input type="number" id="threads" value="5" min="1" max="50"></label></p>

    <button onclick="start()" class="btn btn-success" id="startBtn">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç</button>
    <button onclick="stop()" class="btn btn-danger" id="stopBtn" disabled>‚èπÔ∏è –°—Ç–æ–ø</button>

    <div class="stats">
        <p><strong>–ó–∞–≥—Ä—É–∂–µ–Ω–æ:</strong> <span id="total">0</span> | <strong>–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:</strong> <span id="checked">0</span> | <strong>–û—Å—Ç–∞–ª–æ—Å—å:</strong> <span id="remaining">0</span></p>
        <p><strong>Good:</strong> <span id="good">0</span> | <strong>Bad:</strong> <span id="bad">0</span></p>
    </div>

    <a href="/download/good" class="btn btn-success" target="_blank">üíæ –°–∫–∞—á–∞—Ç—å good.csv</a>
    <a href="/download/bad" class="btn btn-danger" target="_blank">üóëÔ∏è –°–∫–∞—á–∞—Ç—å bad.csv</a>

    <div id="log"></div>
</div>

<script>
    function uploadEmails() {
        const file = document.getElementById('emailFile').files[0];
        const formData = new FormData();
        formData.append('email_file', file);
        fetch('/upload', { method: 'POST', body: formData })
            .then(r => r.json())
            .then(data => {
                if (data.emails) {
                    document.getElementById('total').textContent = data.emails;
                    addLog("‚úÖ Email –∑–∞–≥—Ä—É–∂–µ–Ω—ã: " + data.emails);
                } else {
                    addLog("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ email");
                }
            });
    }

    function uploadProxies() {
        const file = document.getElementById('proxyFile').files[0];
        const formData = new FormData();
        formData.append('proxy_file', file);
        fetch('/upload', { method: 'POST', body: formData })
            .then(r => r.json())
            .then(data => {
                addLog("üîÅ –ü—Ä–æ–∫—Å–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: " + data.proxies);
            });
    }

    function start() {
        fetch('/start', {
            method: 'POST',
            headers: { 'X-API-Key': 'your-secure-api-key-change-this-12345' }
        })
        .then(r => r.json())
        .then(data => {
            if (data.status) {
                document.getElementById('startBtn').disabled = true;
                document.getElementById('stopBtn').disabled = false;
                addLog("‚ñ∂Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞");
            } else {
                addLog("‚ùå –û—à–∏–±–∫–∞: " + data.error);
            }
        });
    }

    function stop() {
        fetch('/stop', {
            method: 'POST',
           headers: { 'X-API-Key': 'OBFvt_5TZUUD5Jk0w1dTuQZq9BHnR6ypDMEIa7Ww6ow' }
        })
        .then(() => {
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            addLog("‚èπÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞");
        });
    }

    function addLog(msg) {
        const log = document.getElementById('log');
        log.innerHTML += `[${new Date().toLocaleTimeString()}] ${msg}<br>`;
        log.scrollTop = log.scrollHeight;
    }

    // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    setInterval(() => {
        fetch('/stats', {
            headers: { 'X-API-Key': 'your-secure-api-key-change-this-12345' }
        })
        .then(r => r.json())
        .then(data => {
            document.getElementById('checked').textContent = data.stats.checked;
            document.getElementById('remaining').textContent = data.stats.remaining;
            document.getElementById('good').textContent = data.stats.good;
            document.getElementById('bad').textContent = data.stats.bad;
        })
        .catch(() => {});
    }, 2000);
</script>
</body>
</html>
